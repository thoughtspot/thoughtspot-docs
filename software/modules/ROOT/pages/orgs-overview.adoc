= Multi-tenancy with Orgs
:last_updated: 9/23/2022
:linkattrs:
:experimental:
:description: Understand ThoughtSpot's multi-tenancy feature, allowing your instance to be logically partitioned into multiple environments.

include::partial$org-intro.adoc[]

This article is an overview of the Orgs functionality and Org management in the standard ThoughtSpot environment. To learn more about Orgs functionality and programmatic Org management using REST APIs in the ThoughtSpot developer environment, refer to https://developers.thoughtspot.com/docs/?pageid=orgs[Multi-tenancy with Orgs^]. To learn more about Orgs APIs, refer to https://developers.thoughtspot.com/docs/?pageid=orgs-api[Orgs API^].

WARNING: After you enable the Orgs feature on a cluster, you can’t turn off the ability to create Orgs. However, your environment remains a single-tenant environment until you create an Org. You can also delete all the Orgs you created, and just use the Primary Org, if you would like a single-tenant environment with Orgs enabled. For more information, see <<enable-disable,Enabling and disabling Orgs>>.

== Orgs in ThoughtSpot

If the Orgs feature is enabled on your instance, only one Org exists by default. ThoughtSpot refers to this default Org as the *Primary Org*. The *cluster administrator* is the administrator of the Primary Org. The administrator of the Primary Org can create more Orgs, add an administrator user profile to each Org to manage users and groups, and define access control at the Org level. The administrator of any other Org, referred to as an *Org administrator*, can only administer their Org. Only administrators of the Primary Org can administer across Orgs.

The following diagram depicts the Orgs architecture on a multi-tenant ThoughtSpot instance.

image::org-logical-architecture.png[Org logical architecture diagram]

[NOTE]
====
* The Primary Org cannot be deleted.
* Each Org is identified by a unique name and can have its own users and groups.
* Groups are unique to an Org and can be created only within the context of an Org.
* A user can belong to multiple Orgs.
====

== Multi-tenant isolation

ThoughtSpot ensures complete Org isolation in a multi-tenant environment. Specifically, when you use the Orgs feature, ThoughtSpot ensures that all of the following are restricted to their particular Org:

* Data warehouse connection
* Data warehouse data
* Groups
* Users
** Note that users can belong to multiple Orgs, but at any given time can only access the data and objects of their current Org.
** If users belong to multiple Orgs, they can switch their current Org context to one of the other Orgs they belong to.
** Users have no awareness of Orgs they do not belong to.
* ThoughtSpot objects: Liveboards, Worksheets, Answers, and tables. You cannot share objects between Orgs.
* Search data content and indexing
* Search Answers content and indexing
* Other indexing

== User roles

On a multi-tenant instance, ThoughtSpot supports the following 3 user roles: cluster administrator, Org administrator, and Org user. By default, the administrator of the Primary Org is a cluster administrator. The cluster administrator can access all Orgs and perform CRUD (Create, Read, Update, and Delete) operations on all Orgs. The cluster administrator can also switch between Orgs and also act as an Org administrator.

Org administrators can administer and manage users and groups only of their respective organizations, not all Orgs. Users can belong to more than one Org and access data objects based on the privileges assigned to the groups to which they belong. The following diagram depicts the setup for users on a multi-tenant ThoughtSpot instance.

image::org-user-setup-diagram.png[Org user setup diagram]

[#cluster-org-admin]
=== Cluster administrators and Org administrators

include::partial$org-admin.adoc[]

== Create and manage Orgs

To create an Org on a multi-tenant ThoughtSpot instance, you need cluster administrator privileges. By default, the administrator of the Primary Org is a cluster administrator. The cluster administrator can create Orgs using either the UI or the REST v1 API endpoints. The cluster administrator can also edit and delete Orgs.

For information on how to create, edit, and delete Orgs, refer to xref:orgs-administration-overview.adoc#create-manage[Orgs administration].

To create Orgs using the REST v1 API endpoints, refer to https://developers.thoughtspot.com/docs/?pageid=orgs-api[Orgs API^].

[#switch]
== Switch between Orgs

Any user with access to multiple Orgs can use the *Org switcher* in the top navigation bar, next to the help icon, to switch between the Orgs they belong to. The *Org switcher* also identifies the Org the user is currently in. For example, in the following image, the user is in the Primary Org.

image::org-switcher.png[Org switcher] - waiting for sw cluster with orgs enabled for sw specific image

A user only sees the Orgs they belong to in the Org switcher. If a user is only part of one Org, they do not have the option to switch between Orgs. They only see the one Org that they belong to.

A cluster administrator can access several Org objects and apply configuration changes. Before performing any operation on the objects in an Org, the administrator must specify the correct Org to ensure that configuration changes are applied in the relevant Org context.

//image::org-switcher-gif.gif[Switch the Org]- waiting for sw cluster with orgs enabled for sw specific image

include::partial$all-org-scope.adoc[]

== Manage users and groups

include::partial$org-users-groups.adoc[]

For information on how to add, remove, and manage users and groups in Orgs, refer to xref:orgs-administration-overview.adoc#users-groups[Orgs administration].

[#enable-disable]
== Enabling and disabling Orgs
The Orgs feature is off by default. To enable Orgs in your environment, contact {support-url}.

After you enable the Orgs feature on a cluster, you can’t turn off the ability to create Orgs. However, your environment remains a single-tenant environment until you create an Org. You can also delete all the Orgs you created, and just use the Primary Org, if you would like a single-tenant environment with Orgs enabled.

If you decide not to take advantage of multi-tenancy after enabling Orgs, your ThoughtSpot environment will be different in the following ways:

* Your Admin Console will look like the xref:admin-console-orgs.adoc[] instead of the standard Admin Console. The Orgs Admin Console has all the same functionality as the standard Admin Console. It also has the ability to create Orgs.
* Your top navigation bar will have an <<switch,Org switcher>> next to the help icon. However, if you don't create any Orgs, the Org switcher doesn't do anything.

== Limitations

* You can have a maximum of 400 Orgs.
//* xref:oidc-configure.adoc[] is not available as an authentication method in an Orgs environment. See xref:orgs-administration-overview.adoc#authentication[User authentication].
* You can't have two different Orgs open in two different tabs or windows. After you open another tab or window in a different Org, the content in the first tab or window automatically switches to the Org you opened most recently.

'''
> **Related information**
>
> * xref:orgs-administration-overview.adoc[Orgs administration]
> * xref:user-management-orgs.adoc[]
> * xref:group-management-orgs.adoc[]
> * xref:admin-console-orgs.adoc[]