= Pivot table
:last_updated: 12/1/2020
:experimental:
:linkattrs:
:page-aliases: /complex-search/about-pivoting-a-table.adoc

Pivot tables are charts that enable you to explore an alternate visualization of your data in a wide, customizable table.
With pivot tables, you can use the same table to visualize some of your data horizontally, and some data vertically.

If you would like to visualize your search as a pivot table, click on the *change visualization* icon image:icon-chart-type-10px.png[] near the top right of your screen, and select *pivot table*.
You need at least one attribute and one measure in your search.

You can restructure your pivot table by dragging and dropping the measures and attributes under *edit chart configuration* image:icon-gear-10px.png[], or by dragging and dropping column headings on the table itself.

If you right-click a row or column heading, the system displays a contextual menu, allowing you to *exclude* or *include* values, xref:search-drill-down.adoc[drill down], *show underlying data*, *SpotIQ analyze*, or *sort*.

image::charts-pivot-table-sort.png[Sort by a row heading]

image::charts-pivot-table-column.png[Sort by a column heading]

If you right-click a table cell, the system displays the contextual menu, so you can *exclude* or *include* values, xref:search-drill-down.adoc[drill down], *show underlying data*, or *SpotIQ analyze*.

image::charts-pivot-table-cell.png[Pivot table cell menu]

[#sort]
== Sort
To sort any column or row, right-click on a row or column heading or subheading or a measure or attribute name and select *Sort*. You can also sort from the search bar. Type `sort by <column name> [ascending | descending]`.

You can sort a pivot table in many ways; however, there are several limitations to the sorting experience.

=== Limitations
Sorting on a pivot table includes the following limitations:

* You can only sort on one attribute at a time.

* When you sort by a measure, it sorts both columns and rows.

* When you save a pivot table that you sorted, any sorts you added do not save.

== Expanding or contract columns and rows

Click on a column or row heading to expand it.
Additionally, you can expand or collapse all columns and rows by right-clicking the arrow on the top left of a cell.

image::chart-pivot-table-expand-all.png[Expand or collapse all]

When you pin a pivot table to a Pinboard, it retains your expansion settings.

== Display totals

You can see your data as a percent of a row or column total, or as a percent of the grand total.
Grand totals aggregate all the data in your pivot table.

To see your data as a percent, click the *edit chart configuration* image:icon-gear-10px.png[] icon, and click *settings* at the bottom of the chart configuration panel.
Click on the dropdown menu to choose whether you want to see your data as a percent of a row or column total, or as a percent of the grand total.

image::chart-pivot-table-grand-total.png[See your data as a percent]

You only see 100% value when grand total rows is enabled.
When it is disabled, the rows and columns have no parental total column, so the percentage cannot be calculated.
All intermediate totals (columns or rows) display the percentage values calculated with respect to their parent.
For each inner summary (column or row) the parental total values are assumed to be 100% internally.

Select *Pivot Summaries* in the *Settings* menu to see row and column totals.

image::chart-pivot-table-summaries.png[See row and column summaries]

== Format row headers

You can view your row headers in a more compact (tree) layout.
To turn on compact row headers, select *Compact row headers* in the *Settings* menu.

image::chart-pivot-table-compact.png[Compact row headers]

You can change the type of total shown for an aggregated measure from the header menu that appears when you click on a header's *more* icon:

image::chart-pivot-table-aggregate.png[Change aggregation type]

== Heatmap mode

The heatmap functionality allows you to see which measures contribute more to the total than others within the table.

image::chart-pivot-table-heatmap.png[Heatmap mode]

To turn on the heatmap, click the *edit chart configuration* image:icon-gear-10px.png[] icon, and click *settings* at the bottom of the chart configuration panel.
Select *heatmap mode*.

== Pivot table limitations

The pivot table chart type has these limitations:

* The pivot table displays a maximum of 100k rows.
If your query returns more than 100k rows, you cannot visualize it with a pivot table.
* You cannot use conditional formatting.
* Pivot tables do not support use of xref:formulas-aggregation-group.adoc[group aggregation functions].
* If the query the pivot table is based on contains the `top` or `bottom` keyword, column and row summaries are not accurate.

* You cannot filter aggregated columns or columns with aggregated formulas.
