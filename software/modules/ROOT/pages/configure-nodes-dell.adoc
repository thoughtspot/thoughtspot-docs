= Configure ThoughtSpot nodes on the Dell appliance
:last_updated: 3/3/2020
:linkattrs:

Configure your nodes before you can install your cluster(s).

After you connect the appliance, a command line appears on your console.
Configure the nodes on this command line.
Follow the steps in this checklist.

[cols="5%,95%"]
|===
| &#10063;
| <<node-step-1,Step 1: Get a template for network configuration>>

| &#10063;
| <<node-step-2,Step 2: Prepare node configuration>>

| &#10063;
| <<node-step-3,Step 3: Configure the nodes>>

| &#10063;
| <<node-step-4,Step 4: Confirm node configuration>>
|===

[#node-step-1]
== Step 1: Get a template for network configuration

Make sure you have logged into your cluster.
If you have not, use admin credentials to log in to your cluster.

Run the `tscli cluster get-config` command to get a template for network configuration.
Redirect it to the file `nodes.config`.
You can find more information on this process in the xref:nodesconfig-example.adoc[`nodes.config` file reference].

 $ tscli cluster get-config |& tee nodes.config

[#node-step-2]
== Step 2: Prepare node configuration

. Add your specific network information for the nodes in the `nodes.config` file, as demonstrated in the xref:nodesconfig-example.adoc#autodiscovery-of-one-node-example[autodiscovery of one node example].
Run `vim nodes.config` to edit the file.
+
[source,console]
----
$ vim nodes.config
----
+
NOTE: Some of the information in the `nodes.config` file may be pre-populated from earlier steps.
For example, if you specified an IP address while creating VMs, that IP address might already be present in your `nodes.config` file.

. Fill in the areas specified in xref:parameters-nodesconfig.adoc[Parameters of the nodes.config file] with your specific network information.
+
If you have additional nodes, complete each node within the nodes.config file in the same way.
+
Do not edit any part of the `nodes.config` file except the sections described in xref:parameters-nodesconfig.adoc[Parameters of the nodes.config file]. If you delete quotation marks, commas, or other parts of the code, it may cause setup to fail.

. Update the file `/etc/hosts` with all the node IP addresses and hostnames for the other VMs that will be part of the ThoughtSpot cluster.

[#node-step-3]
== Step 3: Configure the nodes

Configure the nodes in the `nodes.config` file using the `set-config` command.

Run `$ cat nodes.config | tscli cluster set-config` in your terminal.

If the command returns an error, refer to xref:install-cluster-dell.adoc#set-config-error-recovery[set-config error recovery].

[source,console]
----
$ cat nodes.config | tscli cluster set-config
----
----
Connecting to local node-scout
Setting up hostnames for all nodes
Setting up networking interfaces on all nodes
Setting up hosts file on all nodes
Setting up NTP Servers
Setting up Timezone
Done setting up ThoughtSpot
----

[#node-step-4]
== Step 4: Confirm node configuration

Use the `get-config` command to confirm node configuration.

Your output may look similar to the following:

[source,console]
----
$ tscli cluster get-config
----
----
{
  "ClusterId": "",
  "ClusterName": "",
  "DataNetmask": "255.255.252.0",
  "DataGateway": "192.168.4.1",
  "IPMINetmask": "255.255.252.0",
  "IPMIGateway": "192.168.4.1",
  "Timezone": "America/Los_Angeles",
  "NTPServers": "0.centos.pool.ntp.org,1.centos.pool.ntp.org,2.centos.pool.ntp.org,3.centos.pool.ntp.org",
  "DNS": "192.168.2.200,8.8.8.8",
  "SearchDomains": "example.company.com",
  "Nodes": {
	"ac:1f:6b:8a:77:f6": {
  	"NodeId": "ac:1f:6b:8a:77:f6",
  	"Hostname": "Thoughtspot-server1",
  	"DataIface": {
    	"Name": "eth2",
    	"IPv4": "192.168.7.70"
  	},
  	"IPMI": {
    	"IPv4": "192.168.5.70"
  	}
	}
  }
}
----

== Additional resources

As you develop your expertise in network configuration, we recommend the following ThoughtSpot U course:

* https://training.thoughtspot.com/node-network-configuration/437249[Network Configuration,window=_blank]

See other training resources at:

image::ts-u.png[link="https://training.thoughtspot.com/", window=_blank]

== Install your cluster

Next, xref:install-cluster-dell.adoc[install your cluster.]

'''
> **Related information**
>
> * xref:prerequisites-dell.adoc[Prerequisites]
> * xref:hardware-requirements-dell.adoc[Hardware requirements]
> * xref:connect-appliance-dell.adoc[Connect the appliance]
> * xref:configure-management-dell.adoc[Configure management settings]
> * xref:install-cluster-dell.adoc[Install cluster]