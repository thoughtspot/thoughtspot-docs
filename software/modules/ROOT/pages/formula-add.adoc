= Add a formula to a search
:last_updated: 05/10/2022
:experimental:
:linkattrs:
:page-partial:
:page-aliases: /complex-search/how-to-add-formula.adoc
:description: You can add a formula directly within a search, to perform mathematical functions, check for and replace null values, or add conditional logic.

include::partial$liveboards-announcement.adoc[]

NOTE: The formula editor redesign is part of the xref:answer-experience-new.adoc[new answer experience]. The new answer experience is off by default, but the option to turn it on or off individually is on by default. If you have the classic answer experience on, your user interface and experience may be different from the experience described in this article. You can turn the new answer experience on or off individually from the *Experience manager* panel in xref:user-profile.adoc#new-answer-experience[your profile]. If that option is not available, contact your administrator.

You can add a formula directly within a search.
Some common reasons for using a formula in a search are to perform mathematical functions, check for and replace null values, or add conditional logic.

To create a formula in a search, follow these steps:

. Start a new search, or choose an existing answer from a Liveboard to edit.
. Open the Data panel from the upper right corner if it is not open, and click the + icon next to Formulas. If the xref:answer-experience-new.adoc[new answer experience] is off in your environment, click the more options icon image:icon-more-10px.png[more options menu icon] in the upper-right side of the table, and select *Add formula*.
+
image::formula-editor-add.png[Add a formula]

. Name and enter your formula in the Formula Editor. The new Formula Editor supports multi-line wrapping of long formulas. To continue the formula on a new line, press *Enter* or *return* on your keyboard. The Editor displays suggestions after you enter at least one character.
+
image::worksheet-formula-profit.png[Use the Formula Builder]
+
NOTE: Formula elements are color coded by type and can include the formula operators and functions (blue), the names of columns (purple), and/or constants (black).

. You can see a list of formula operators with examples by selecting the help icon *?* in the upper right corner. If the new answer experience is off in your environment, click *Formula Assistant*. Expand a category, such as *Comparison*, and click on a formula operator for a definition and example.
+
image::worksheet-formula-assistant.png[Formula Assistant]

. To change what your formula returns, use the *Advanced settings*.
Depending on your formula, you may be able to change the following aspects:
 ** *Data type*: Determines the type of data that the formula generates.
For example, use `date` for an `add_days` formula.
 ** *Measure or attribute*: Determines if the output of the formula is a measure or an attribute.
For example, choose `attribute` for a formula that generates age groups, and choose `measure` for a formula that generates profit.
 ** *Aggregation*: Determines the default aggregation of the formula output.
For example, choose `min` to see minimum profit.

+
image::worksheet-formula-settings.png[Advanced settings in the Formula Builder]
. Click *Save*.
Name your formula, if you did not already name it.

'''
> **Related information**
>
> * xref:formula-reference.adoc[Formula function reference]
