= Back up and Restore a GCP cluster using GCS
:last_updated: 7/13/2020
:experimental:
:linkattrs:

Learn how to back up or restore your ThoughtSpot cluster hosted in GCP using a GCS bucket.

It is recommended to use a bucket in the same region as your cluster.
By doing this, you avoid additional cross-region data transfer costs.

[#backup-bucket]
== Backing up to a GCS bucket

To back up your cluster to a GCS bucket, use the ThoughtSpot tscli:

. Log in to the Linux shell of your cluster using SSH.
+
[source,bash]
----
$ ssh admin@<cluster-IP>
----

. Run the backup command using the following syntax:
+
[source,bash]
----
tscli backup create
   --storage_type=cloud <SNAPSHOT NAME> <PATH TO BACKUP>
   --bucket_name=<BUCKET NAME>`
----
+
Example:
+
[source,bash]
----
$ tscli backup create -
    --storage_type=cloud snapshot_1 my_backup001
    --bucket_name=my_bucket
----

[#restore-bucket]
== Restoring from a GCS bucket

To restore your cluster from a GCS bucket, use the ThoughtSpot tscli:

. Log in to the Linux shell of your cluster using SSH.
+
[source,bash]
----
$ ssh admin@<cluster-IP>
----

. Run the restore command using the following syntax:
+
[source,bash]
----
tscli cluster restore <PATH TO BACKUP ON CLOUD>
   --enable_cloud_storage=gcs
----
+
Example:
+
[source,bash]
----
$ tscli cluster restore gcs://bucket0001/backup/my_backup001
   --enable_cloud_storage=gcs
----

'''
> **Related information**
>
> * xref:gcp-launch-instance.adoc[Set up ThoughtSpot in GCP]
> * xref:gcp-installing.adoc[Configure ThoughtSpot nodes in GCP]
> * xref:gcp-cluster-install.adoc[Install ThoughtSpot clusters in GCP]
