= Time-based usage
:last_updated: 11/05/2021
:linkattrs:
:experimental:
:page-aliases:
:description:

[.lead]
Time-based usage is measured in usage minutes, and is based on a userâ€™s activity.

[#usage-minutes]
== Usage minutes

Usage minutes refer to the number of minutes that the members of your organization use ThoughtSpot.
We calculate each user's usage minutes separately.

We calculate usage minutes in the following manner:

* Any user activity in the application kicks off a 10-minute usage block.
* Any additional user activity within that 10 minutes does not drive additional consumption;
we charge the whole session at 10 minutes.
* The first click after the initial 10-minute window ends initiates a second 10 minute session.
* If the user activity ceases within a 10-minute time interval, then restarts and lasts past the end of the current 10-minute time interval, it triggers the subsequent time interval.
* We calculate each user's activity separately.
For example, if 10 users are using ThoughtSpot for the same 10 minutes, we count 100 minutes of usage.
+
image::consumption-example.png[Usage minutes example]

== User activity

We define user activity as any user-triggered (initiated) action in ThoughtSpot, starting from the time the user initiates the action, until the time that the results of the action(s) become visible to the user of the product.
This includes any time used by ThoughtSpot to process the user-triggered action in order to present the results to the user.
We measure user activity in <<usage-minutes,usage minutes>>.
You can consume usage minutes during implementation and training prior to go-live, as well as after.

=== User activity that incurs usage minutes

User activity that incurs usage minutes includes any user interaction with the product, such as:

* Clicking any interactive elements inside the ThoughtSpot product, such as menu items, search boxes, tabs, buttons, icons and other user interface artifacts.
Some examples are:
 ** Performing searches on data or search-related actions such as Explore, filters, drill-down, showing underlying data, and other related actions
 ** Creating, editing, updating deleting or interacting with answers, pinboards, worksheets, tables, views, and other objects
 ** Triggering user-initiated SpotIQ analyses
 ** Setup and configuration actions in the product (such as those performed in the *Admin* section of the product or other such parts of the product)
 ** Uploads, downloads, sharing, triggering the sending of emails from within the product
* Browser actions (such as refreshing the page or using the *forward* or *back* buttons)
* Any scrolling in the product that triggers updates to objects or content being viewed
+
For example, if a user is scrolling through a pinboard, initially it displays only a subset of the charts that can fit on the screen.
This counts as initial user activity.
At any point, if the user scrolls through the pinboard, resulting in ThoughtSpot loading and displaying additional charts in that pinboard for the first time, this counts as additional user activity.

=== User activity that does not incur usage minutes

The following do not count toward consumption:

* The only click that does not count as user activity is clicking *Sign out*.
* Any action that happens outside the product or is not user-triggered inside the product is not considered user activity.
For example: the system sending out a scheduled pinboard, a user receiving emails generated by ThoughtSpot based on actions such as scheduled pinboards, welcome or other kinds of emails, and emails sent out as a result of "`Following`" metrics in the product do not count as user activity.
(_However, if the user logs in to the product as a result of these emails, that will start user activity_).
* Any non-user-initiated activity in the system does not count as "`user activity`".
This includes automatically triggered SpotIQ analyses, indexing or other non-user-initiated queries against external warehouses and any other background processes or daemons that are not a result of an explicit user triggered action.
* Any scrolling on ThoughtSpot product pages that does not update any content on the page does not count towards consumption.
* Leaving ThoughtSpot open in another tab does not count toward consumption.

[#credit-usage-pinboard]
== Monitor your consumption

ThoughtSpot maintains user activity data in a relational database to make it available for reporting in the ThoughtSpot product. ThoughtSpot instances that are hosted in your on-premises/cloud provider environment must connect to this relational database through a connection in order to access information about consumption usage. This connection is created by {support-url} personnel as part of the setup for consumption pricing on ThoughtSpot Software instances (Software on-premises installations). The connection uses Transport Layer Security (TLS) on port 5439 as a secure channel to query the cluster-specific consumption data.

IMPORTANT: When using consumption pricing in ThoughtSpot Software, you must ensure your cluster can connect to `redshift-pricing.thoughtspot.cloud` on TCP port 5439. Access to this port is *required* for an on-prem cluster that uses consumption pricing.

You can monitor your credit consumption with the Credit Usage pinboard, a new default admin-only pinboard with data from the new Credit Usage worksheet.
You can also use the new default admin-only answers with data from the Credit Usage worksheet, _Sample Answer - Credit usage details_ and _Credit usage from Charging Records_.

You can access the answers by searching for them from the home page, or from the *Answers* page.

To view the Credit Usage pinboard, select *Admin* from the top navigation bar, and select *Credit usage*.

image::consumption-usage-pinboard.png[Credit Usage pinboard]

The Credit Usage pinboard contains useful visualizations and headlines you can use to monitor your consumption.
You can use it to determine which users or time periods consume more credits than others.
You can also search the data yourself, using the Credit Usage worksheet, and create your own answers and pinboards.

The Credit Usage pinboard contains the following visualizations and headlines:

* Daily Usage, with Unique Users (last 30 days)
* Billable Credits Consumed, All Time
* Billable Credits Consumed, Month to Date
* Credits Purchased, Expiry Date
* Uncapped Credits Consumed, Month to Date
* Uncapped Credits Consumed, All Time
* Credit Consumption & Usage, Top 10 Users, This Month
* Monthly Credits Consumed, with Unique Users
* Weekly Credits Consumed, with Unique Users, Last 8 Weeks
* Month of Year Credit Usage, by User GUID

Use the visualizations on this pinboard to monitor your consumption.
For example, you may notice that a certain user consumes most of your credits, or that there was a spike during a certain time window.
You can then use the new default answers to <<user-activity,analyze user activity and event details>>.

[#user-activity]
=== Analyze user activity and event details

ThoughtSpot provides 2 default system answers to help you track and analyze your credit consumption.
These answers allow you to dive deeper into the credit consumption and activities of a specific user, or over a specific time window.

Follow these best practices for the 2 new answers, _Sample Answer - Credit usage details_ and _Credit usage from Charging Records_.

. Examine the Credit Usage pinboard to determine a user or time window of interest.
For example, you may notice that a certain user consumes most of your credits, or that there was a spike during a certain time window.
. Determine how you want to investigate this credit consumption:
 ** *Sample Answer - Credit usage details*: This answer is ideal for looking into object-level details, such as the objects a user accessed and the actions they performed on those objects.
 ** *Credit usage from Charging Records*: Use this answer to learn more about API-level details.
You can map activities and credit consumption to specific API calls.
. Use the built-in filters on these answers to narrow down your search to the user and time window of interest.
You must edit the time window filter in the search bar, using this syntax: `+Timestamp >= mm/dd/yyyy hh:mm:ss Timestamp <= mm/dd/yyyy hh:mm:ss+`.
ThoughtSpot filters the answer to only show data in between the two dates you specify.
Select a user to filter by, and for the _Sample Answer - Credit usage details_ answer, optionally select a user action filter.

'''
> **Related information**
>
> * xref:consumption-pricing-query-based.adoc[Query-based usage]
> * xref:consumption-pricing-query-based-generate.adoc[User actions and queries]
> * xref:consumption-pricing-query-based-subscription.adoc[Subscription and rollover]
> * xref:consumption-pricing-storage.adoc[Consumption data storage]
