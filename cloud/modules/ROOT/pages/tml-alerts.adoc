= TML for Monitor alerts
:last_updated: 5/3/2023
:author: Teresa Killmond
:linkattrs:
:experimental:
:page-layout: default-cloud
:description: Use TML to modify Monitor alerts in a flat-file format. Then, migrate the Monitor alert to a different cluster, or restore it to the same cluster.
:object: Monitor alerts

include::partial$tml-intro.adoc[]

[#syntax-alerts]
include::partial$tml-syntax-alert.adoc[]

[#alert-parameters]
== TML parameters for {object}
These parameters and their definitions are specific to {object}; this list doesn't contain every parameter in every TML file. Similarly, the parameter definitions may vary from object to object, since the parameters may have different roles in different objects.

[width=“100%”,grid=“none”,options="header"]
|===
| a - f | g - p | s - v
a| <<answer_id,answer_id>>

<<comparator,comparator>>

<<condition,condition>>

<<creator,creator>>

<<cron,cron>>

<<day_of_month,day_of_month>>

<<day_of_week,day_of_week>>

<<end_time,end_time>>

<<frequency_granularity,frequency_granularity>>

<<frequency_spec,frequency_spec>>

a| <<guid,guid>>

<<hour,hour>>

<<metric_id,metric_id>>

<<minute,minute>>

<<monitor_alert,monitor_alert>>

<<month,month>>

<<name,name>>

<<percentage_change_condition,percentage_change_condition>>

<<pinboard_id,pinboard_id>>

<<pinboard_viz_id,pinboard_viz_id>>

a| <<second,second>>

<<simple_condition,simple_condition>>

<<start_time,start_time>>

<<subscribed_user,subscribed_user>>

<<threshold,threshold>>

<<time_zone,time_zone>>

<<user_email,user_email>>

<<username,username>>

<<value,value>>

<<viz_id,viz_id>>

|===

[#answer_id]
answer_id::
The GUID of an Answer. Used in xref:monitor.adoc[Monitor alert] TML files to specify the KPI used to create the alert. If you are importing or editing a Liveboard, use the <<pinboard_viz_id,pinboard_viz_id>> section instead, and do not include <<answer_id,answer_id>>.
+
You can find this string of letters and numbers at the end of the URL for an Answer.

[#comparator]
comparator::
The operator used in the condition of a xref:monitor.adoc[Monitor] threshold-based alert. The options are `COMPARATOR_GT` (greater than), `COMPARATOR_LT` (less than), `COMPARATOR_GEQ` (greater than or equal to), `COMPARATOR_LEQ` (less than or equal to), `COMPARATOR_EQ` (equal to), `COMPARATOR_NEQ` (not equal to), `PERCENTAGE_CHANGE_COMPARATOR_CHANGES_BY` (changes by %), `PERCENTAGE_CHANGE_COMPARATOR_INCREASES_BY` (increases by %), `PERCENTAGE_CHANGE_COMPARATOR_DECREASES_BY` (decreases by %). The `PERCENTAGE_CHANGE` operators are only valid if your KPI includes a xref:search-time.adoc[time-series keyword], such as `weekly`.

[#condition]
condition::
Container for the xref:monitor.adoc[Monitor] threshold-based alert condition. Contains either a simple condition or a percentage change condition. To change a threshold-based alert to a scheduled alert, remove the `condition` section.

[#creator]
creator::
Container for information about the creator of a xref:monitor.adoc[Monitor alert]. The creator information is only visible for administrators.
+
NOTE: Only administrators can change the owner/creator of an alert, and only at the time of alert creation. You can’t change the owner of an alert after the alert is created.

[#cron]
cron::
Contains frequency information for delivery of xref:monitor.adoc[Monitor alerts].

[#day_of_month]
day_of_month::
The numbered days of the month, 1-31, when a xref:monitor.adoc[Monitor alert] should be sent. For example, `"3,18,25"`.

[#day_of_week]
day_of_week::
The numbered days of the week, 0-6, when a xref:monitor.adoc[Monitor alert] should be sent. For example, `"0,3,5"`. `0` refers to Sunday, and `6` refers to Saturday.

[#end_time]
end_time::

The epoch time at which the alert should end. This is almost always 0, which means the alert continues to be triggered indefinitely. Do not edit this parameter.

[#frequency_granularity]
frequency_granularity::
Frequency with which ThoughtSpot sends a xref:monitor.adoc[Monitor alert], either `HOURLY`, `DAILY`, `WEEKLY`, or `MONTHLY`.

[#frequency_spec]
frequency_spec::
Contains information about when ThoughtSpot sends a scheduled xref:monitor.adoc[Monitor alert].

[#guid]
guid::
The GUID for the xref:monitor.adoc[Monitor alert].
+
You can find this string of letters and numbers at the end of the URL for an object.

[#hour]
hour::
Specifies the hour that a xref:monitor.adoc[Monitor alert] is scheduled to be sent. For example, if you specify `9` for the `hour` parameter and `17` for the minute parameter, ThoughtSpot sends the Monitor alert at 9:17 AM.

[#metric_id]
metric_id::
Container for the KPI used in the xref:monitor.adoc[Monitor alert].

[#minute]
minute::
Specifies the minute that a xref:monitor.adoc[Monitor alert] is scheduled to be sent. For example, if you specify `9` for the `hour` parameter and `17` for the minute parameter, ThoughtSpot sends the Monitor alert at 9:17 AM.

[#monitor_alert]
monitor_alert::
Top-level container for all object definitions within the xref:monitor.adoc[Monitor alert].

[#month]
month::
The numbered months of the year (1-12, starting with January, even if you use a custom/fiscal calendar) in which the xref:monitor.adoc[Monitor alert] should be sent. For example, to send an alert only in March and September, specify `'3,9'`.

[#name]
name::
The name of an object.
Applies to `monitor_alert`.

[#percentage_change_condition]
percentage_change_condition::

Container for the xref:monitor.adoc[Monitor] threshold-based alert condition, if the alert condition involves a percentage change. If the alert condition involves a simple condition (greater than, less than, equal, not equal to, greater than or equal to, less than or equal to), ThoughtSpot uses `simple_condition` instead of `percentage_change_condition`.

[#pinboard_id]
pinboard_id::
The GUID of a Liveboard. Used in xref:monitor.adoc[Monitor alert] TML files to specify the KPI used to create the alert. If you are importing or editing an Answer, use <<answer_id,answer_id>> instead, and do not include any part of the <<pinboard_viz_id,pinboard_viz_id>> section.
+
You can find this string of letters and numbers at the end of the URL for a Liveboard.

[#pinboard_viz_id]
pinboard_viz_id::
Contains information about the KPI used to create a xref:monitor.adoc[Monitor alert]. If you are importing or editing an Answer, use <<answer_id,answer_id>> instead, and do not include any part of the <<pinboard_viz_id,pinboard_viz_id>> section.

[#second]
second::
Specifies the second that a xref:monitor.adoc[Monitor alert] is scheduled to be sent. For example, if you specify `"30"` for the `second` parameter, `9` for the `hour` parameter, and `17` for the minute parameter, ThoughtSpot sends the Monitor alert at 9:17 and 30 seconds. You can only specify seconds in TML, not in the UI.

[#simple_condition]
simple_condition::
Container for the xref:monitor.adoc[Monitor] threshold-based alert condition. If the alert condition involves a percentage change, ThoughtSpot uses `percentage_change_condition` instead of `simple_condition`.

[#start_time]
start_time::

The epoch time at which the user created the alert. Do not edit this parameter.

[#subscribed_user]
subscribed_user::
List of users subscribed to a xref:monitor.adoc[Monitor alert].

[#threshold]
threshold::
Container for the threshold value in a xref:monitor.adoc[Monitor] threshold-based alert.

[#time_zone]
time_zone::
Specifies the timezone ThoughtSpot should use when sending an alert. For example, if you live in New York City (ET) and are creating an alert for someone in Los Angeles (PST), you may want to specify that the alert should be sent at 9 AM in the `America/Los_Angeles` timezone. Specify the timezone with the full name: America/Los_Angeles, not PST.

[#user_email]
user_email::
The email address of the creator of a xref:monitor.adoc[Monitor alert], or the email addresses of subscribed users for a Monitor alert. The creator information is only visible for administrators. If you specify both a `username` and a `user_email` for the creator of a Monitor alert, the `username` specified takes precedence. If the `user_email` is the only parameter specified and multiple ThoughtSpot users have that email address, the TML validation returns an error, and you must specify a username.
+
NOTE: Only administrators can change the owner/creator of an alert, and only at the time of alert creation. You can’t change the owner of an alert after the alert is created.

[#username]
username::
The username of the creator of a xref:monitor.adoc[Monitor alert], or the usernames of subscribed users for a Monitor alert. The creator information is only visible for administrators. If you specify both a `username` and a `user_email` for the creator of a Monitor alert, the `username` specified takes precedence.
+
NOTE: Only administrators can change the owner/creator of an alert, and only at the time of alert creation. You can’t change the owner of an alert after the alert is created.

[#value]
value::
The threshold value in a xref:monitor.adoc[Monitor] threshold-based alert, or an accepted value for a Parameter, if a list was configured when xref:parameters-create.adoc[creating a Parameter].

[#viz_id]
viz_id::
The GUID of a Liveboard visualization. Used in xref:monitor.adoc[Monitor alert] TML files to specify the KPI used to create the alert. If you are importing or editing an Answer, use <<answer_id,answer_id>> instead, and do not include any part of the <<pinboard_viz_id,pinboard_viz_id>> section.
+
You can find this string of letters and numbers at the end of the URL for a Liveboard visualization. Under the visualization's *more* image:icon-more-10px.png[more menu icon] menu, select *Copy link*. The link copies to your clipboard. The second string of letters and numbers in the URL is the visualization GUID.

[#limitations]
== Limitations of working with TML files

There are certain limitations to the changes you can apply by editing {object} through TML.

* You can't import manually compressed .zip files.
You can only import .zip files that you exported from ThoughtSpot: a custom set of TML files, an object and its associated data sources, or multiple objects of the same type that you exported from the object list page.