= TML for Monitor alerts
:last_updated: 5/3/2023
:author: Teresa Killmond
:linkattrs:
:experimental:
:page-layout: default-cloud
:description: Use TML to modify Monitor alerts in a flat-file format. Then, migrate the Monitor alert to a different cluster, or restore it to the same cluster.
:object: Monitor alerts
:jira: SCAL-190426

include::partial$tml-intro.adoc[]

[#syntax-alerts]
include::partial$tml-syntax-alert.adoc[]

[#alert-parameters]
== TML parameters for {object}
These parameters and their definitions are specific to {object}; this list doesn't contain every parameter in every TML file. Similarly, the parameter definitions may vary from object to object, since the parameters may have different roles in different objects.

[width=“100%”,grid=“none”,options="header"]
|===
| a - f | g - p | s - v

a| <<answer_id,answer_id>>

<<column,column>>

<<comparator,comparator>>

<<condition,condition>>

<<creator,creator>>

<<cron,cron>>

<<day_of_month,day_of_month>>

<<day_of_week,day_of_week>>

<<display_name,display_name>>

<<end_time,end_time>>

<<filters,filters>>

<<frequency_granularity,frequency_granularity>>

<<frequency_spec,frequency_spec>>

<<fqn,fqn>>

a| <<guid,guid>>

<<hour,hour>>

<<id,id>>

<<metric_id,metric_id>>

<<minute,minute>>

<<monitor_alert,monitor_alert>>

<<month,month>>

<<name,name>>

<<oper,oper>>

<<percentage_change_condition,percentage_change_condition>>

<<personalised_view_id,personalised_view_id>>

<<personalised_view_info,personalised_view_info>>

<<pinboard_id,pinboard_id>>

<<pinboard_viz_id,pinboard_viz_id>>

a| <<second,second>>

<<simple_condition,simple_condition>>

<<start_time,start_time>>

<<subscribed_user,subscribed_user>>

<<tables,tables>>

<<threshold,threshold>>

<<time_zone,time_zone>>

<<type,type>>

<<user_email,user_email>>

<<username,username>>

<<value,value>>

<<values,values>>

<<viz_id,viz_id>>

|===

[#answer_id]
answer_id::
The GUID of an Answer. Used in xref:monitor.adoc[Monitor alert] TML files to specify the KPI used to create the alert. If you are importing or editing a Liveboard, use the <<pinboard_viz_id,pinboard_viz_id>> section instead, and do not include <<answer_id,answer_id>>.
+
You can find this string of letters and numbers at the end of the URL for an Answer.

[#column]
column::
The id of the column(s) being filtered on. When a Liveboard contains xref:liveboard-filters-linked.adoc[linked filters], or filters that affect visualizations based on more than one Worksheet, the primary filter column appears first in the list of columns in the TML. The linked filter column appears after the primary filter column.


[#comparator]
comparator::
The operator used in the condition of a xref:monitor.adoc[Monitor] threshold-based alert. The options are `COMPARATOR_GT` (greater than), `COMPARATOR_LT` (less than), `COMPARATOR_GEQ` (greater than or equal to), `COMPARATOR_LEQ` (less than or equal to), `COMPARATOR_EQ` (equal to), `COMPARATOR_NEQ` (not equal to), `PERCENTAGE_CHANGE_COMPARATOR_CHANGES_BY` (changes by %), `PERCENTAGE_CHANGE_COMPARATOR_INCREASES_BY` (increases by %), `PERCENTAGE_CHANGE_COMPARATOR_DECREASES_BY` (decreases by %). The `PERCENTAGE_CHANGE` operators are only valid if your KPI includes a xref:search-time.adoc[time-series keyword], such as `weekly`.

[#condition]
condition::
Container for the xref:monitor.adoc[Monitor] threshold-based alert condition. Contains either a simple condition or a percentage change condition. To change a threshold-based alert to a scheduled alert, remove the `condition` section.

[#creator]
creator::
Container for information about the creator of a xref:monitor.adoc[Monitor alert]. The creator information is only visible for administrators.
+
NOTE: Only administrators can change the owner/creator of an alert, and only at the time of alert creation. You can’t change the owner of an alert after the alert is created.

[#cron]
cron::
Contains frequency information for delivery of xref:monitor.adoc[Monitor alerts].

[#day_of_month]
day_of_month::
The numbered days of the month, 1-31, when a xref:monitor.adoc[Monitor alert] should be sent. For example, `"3,18,25"`.

[#day_of_week]
day_of_week::
The numbered days of the week, 0-6, when a xref:monitor.adoc[Monitor alert] should be sent. For example, `"0,3,5"`. `0` refers to Sunday, and `6` refers to Saturday.

[#display_name]
display_name::
The name or value that displays in the Parameter dialog for an accepted value, if a display name was set when xref:parameters-create.adoc[creating a Parameter]. For example, if the Parameter accepts `true` and `false`, the display names might be `yes` and `no`.

[#end_time]
end_time::

The epoch time at which the alert should end. This is almost always 0, which means the alert continues to be triggered indefinitely. Do not edit this parameter.

[#filters]
filters::
Contains specifications for filters.

[#frequency_granularity]
frequency_granularity::
Frequency with which ThoughtSpot sends a xref:monitor.adoc[Monitor alert], either `HOURLY`, `DAILY`, `WEEKLY`, or `MONTHLY`.

[#frequency_spec]
frequency_spec::
Contains information about when ThoughtSpot sends a scheduled xref:monitor.adoc[Monitor alert].

[#fqn]
fqn:: The source table's GUID. You can find this string of letters and numbers at the end of the URL for that table or connection.
+
For example, in `https://<company>.thoughtspot.com/#/data/tables/34226aaa-4bcf-4d6b-9045-24cb1e9437cb`, the GUID is `34226aaa-4bcf-4d6b-9045-24cb1e9437cb`.
+
Use this optional parameter to reduce ambiguity and identify a specific table, if you have multiple tables with the same name. When exporting a TML file, you have the option to *Export FQNs of referenced objects*, which ensures that the TML files you export contain FQNs for the underlying tables and connections. If you do not add the `fqn` parameter, and the connection or table you reference does not have a unique name, the file import fails.

[#guid]
guid::
The GUID for the xref:monitor.adoc[Monitor alert].
+
You can find this string of letters and numbers at the end of the URL for an object.

[#hour]
hour::
Specifies the hour that a xref:monitor.adoc[Monitor alert] is scheduled to be sent. For example, if you specify `9` for the `hour` parameter and `17` for the minute parameter, ThoughtSpot sends the Monitor alert at 9:17 AM.

[#id]
id::
Specifies the id of an object, such as `tables`.

[#metric_id]
metric_id::
Container for the KPI used in the xref:monitor.adoc[Monitor alert].

[#minute]
minute::
Specifies the minute that a xref:monitor.adoc[Monitor alert] is scheduled to be sent. For example, if you specify `9` for the `hour` parameter and `17` for the minute parameter, ThoughtSpot sends the Monitor alert at 9:17 AM.

[#monitor_alert]
monitor_alert::
Top-level container for all object definitions within the xref:monitor.adoc[Monitor alert].

[#month]
month::
The numbered months of the year (1-12, starting with January, even if you use a custom/fiscal calendar) in which the xref:monitor.adoc[Monitor alert] should be sent. For example, to send an alert only in March and September, specify `'3,9'`.

[#name]
name::
The name of an object.
Applies to `monitor_alert`.

[#oper]
oper::
The operator of the filter. Accepted operators are `"in"`, `"not in"`, `"between"`, `=<`, `!=`, `\<=`, `>=`, `>`, or `<`.

[#percentage_change_condition]
percentage_change_condition::

Container for the xref:monitor.adoc[Monitor] threshold-based alert condition, if the alert condition involves a percentage change. If the alert condition involves a simple condition (greater than, less than, equal, not equal to, greater than or equal to, less than or equal to), ThoughtSpot uses `simple_condition` instead of `percentage_change_condition`.

[#personalised_view_id]
personalised_view_id::
ID of the personalised View the monitor alert is based on. If no personalised_view_id is included, this TML creates an alert with no ad-hoc filters applied. If a personalised_view_id is available and supplied as part of the metric_id, the filters and parameters applied to the personalised View are applied to create the contextual alert.

[#personalised_view_info]
personalised_view_info::
Container for the filters and parameters applied on the personalized View. If the TML contains only personalised_view_info and no personalised_view_id, the TML creates a new personalised View, and the contextual alert created uses the filters and parameters provided in the personalised_view_info.


[#pinboard_id]
pinboard_id::
The GUID of a Liveboard. Used in xref:monitor.adoc[Monitor alert] TML files to specify the KPI used to create the alert. If you are importing or editing an Answer, use <<answer_id,answer_id>> instead, and do not include any part of the <<pinboard_viz_id,pinboard_viz_id>> section.
+
You can find this string of letters and numbers at the end of the URL for a Liveboard.

[#pinboard_viz_id]
pinboard_viz_id::
Contains information about the KPI used to create a xref:monitor.adoc[Monitor alert]. If you are importing or editing an Answer, use <<answer_id,answer_id>> instead, and do not include any part of the <<pinboard_viz_id,pinboard_viz_id>> section.

[#second]
second::
Specifies the second that a xref:monitor.adoc[Monitor alert] is scheduled to be sent. For example, if you specify `"30"` for the `second` parameter, `9` for the `hour` parameter, and `17` for the minute parameter, ThoughtSpot sends the Monitor alert at 9:17 and 30 seconds. You can only specify seconds in TML, not in the UI.

[#simple_condition]
simple_condition::
Container for the xref:monitor.adoc[Monitor] threshold-based alert condition. If the alert condition involves a percentage change, ThoughtSpot uses `percentage_change_condition` instead of `simple_condition`.

[#start_time]
start_time::

The epoch time at which the user created the alert. Do not edit this parameter.

[#subscribed_user]
subscribed_user::
List of users subscribed to a xref:monitor.adoc[Monitor alert].

[#tables]
tables::
List of tables used by the underlying KPI. Each table is defined by `name`.


[#threshold]
threshold::
Container for the threshold value in a xref:monitor.adoc[Monitor] threshold-based alert.

[#time_zone]
time_zone::
Specifies the timezone ThoughtSpot should use when sending an alert. For example, if you live in New York City (ET) and are creating an alert for someone in Los Angeles (PST), you may want to specify that the alert should be sent at 9 AM in the `America/Los_Angeles` timezone. Specify the timezone with the full name: America/Los_Angeles, not PST.

[#type]
type:: The type of date filter.


[#user_email]
user_email::
The email address of the creator of a xref:monitor.adoc[Monitor alert], or the email addresses of subscribed users for a Monitor alert. The creator information is only visible for administrators. If you specify both a `username` and a `user_email` for the creator of a Monitor alert, the `username` specified takes precedence. If the `user_email` is the only parameter specified and multiple ThoughtSpot users have that email address, the TML validation returns an error, and you must specify a username.
+
NOTE: Only administrators can change the owner/creator of an alert, and only at the time of alert creation. You can’t change the owner of an alert after the alert is created.

[#username]
username::
The username of the creator of a xref:monitor.adoc[Monitor alert], or the usernames of subscribed users for a Monitor alert. The creator information is only visible for administrators. If you specify both a `username` and a `user_email` for the creator of a Monitor alert, the `username` specified takes precedence.
+
NOTE: Only administrators can change the owner/creator of an alert, and only at the time of alert creation. You can’t change the owner of an alert after the alert is created.

[#value]
value::
The threshold value in a xref:monitor.adoc[Monitor] threshold-based alert, or an accepted value for a Parameter, if a list was configured when xref:parameters-create.adoc[creating a Parameter].

[#values]
values::
The values being filtered (excluded or included) in a Liveboard.


[#viz_id]
viz_id::
The GUID of a Liveboard visualization. Used in xref:monitor.adoc[Monitor alert] TML files to specify the KPI used to create the alert. If you are importing or editing an Answer, use <<answer_id,answer_id>> instead, and do not include any part of the <<pinboard_viz_id,pinboard_viz_id>> section.
+
You can find this string of letters and numbers at the end of the URL for a Liveboard visualization. Under the visualization's *more* image:icon-more-10px.png[more menu icon] menu, select *Copy link*. The link copies to your clipboard. The second string of letters and numbers in the URL is the visualization GUID.

[#limitations]
== Limitations of working with TML files

There are certain limitations to the changes you can apply by editing {object} through TML.

* You can't import manually compressed .zip files.
You can only import .zip files that you exported from ThoughtSpot: a custom set of TML files, an object and its associated data sources, or multiple objects of the same type that you exported from the object list page.