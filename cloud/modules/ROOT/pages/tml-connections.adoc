= TML for connections
:last_updated: 5/14/24
:author: Naomi
:linkattrs:
:experimental:
:page-layout: default-cloud
:description: Use TML to modify a ThoughtSpot connection in a flat-file format. Then, migrate the object to a different cluster, or restore it to the same cluster.
:object: connections
:jira: SCAL-148626, SCAL-202207, SCAL-132544, SCAL-202209, SCAL-210485

Use TML to modify a ThoughtSpot connection in a flat-file format. You can edit the connection TML file in the Data Workspace, or export the TML file to edit separately. When exporting the connection TML file, you can choose to export only the connection TML file, to export the connection TML file together with the related table TML files in a zip file, or to export either of the previous options with the FQN for each referenced object included.

Note that before the connection TML file, you could only remap connections by downloading the connection.yaml file, editing it, and re-uploading it. Currently, you can remap columns and change data types from the table TML file, or edit the connection TML file directly to change its properties, such as account name and password.

To work with TML files for {object}, you can download these objects to flat files in `.TML` format, modify the files, and subsequently upload the files either to the same cluster, or to a different cluster.
To learn how to export, change, and update {object}, see xref:scriptability.adoc[Import and export TML files].

== Import the connection TML file

You can use the import TML utility in the Data Workspace to import a connection TML file, either in .tml file format or in .zip file format. You can include table TML files in a .zip file to upload along with the Connection TML file.

To import a TML file, navigate to the Data Workspace, select *Utilities* from the left menu, and click *Import TML*. You can click the *Select .zip or .tml files to upload* box to upload your files, or drag and drop them to the selected area.

If you are uploading a connection TML file that maps to an existing connection, you can either create a new connection, or update the existing connection. If you are uploading a new connection TML file, you only see the *Create* option.

== Export the connection TML file

To export a connection TML file, you can either navigate to the connection in the Data Workspace, and select *Export TML* from the more options menu image:icon-more-10px.png[more options icon], or you can navigate to the *Utilities* option and click *Export TML*. From the *Export TML* window, you can select the *Connections* tab and check the box next to the connection(s) you want to export. Note that you can export connection TML files individually, or in bulk.



[#syntax-connection]
== Syntax of the connection TML file

The `TML` file for connections has a specific syntax.

See the <<connection-parameters,TML parameters for connections>> for details about the keywords used in this example.

See <<limitations,Limitations of working with TML files>> for more information about actions you can't perform using TML.

[subs=+macros]
....
<<guid,guid>>: <connection_guid>
<<connection,connection>> :
  <<name,name>>: <connection_name>
 <<type,type>>: <connection_type>
 <<authentication_type,authentication_type>>: [SERVICE_ACCOUNT, KEY_PAIR]
<<properties,properties>>:
<<key,key>>: <accountName>
<<value,value>>: <account_name>
<<key,key>>: <user>
<<value,value>>: <admin>
<<key,key>>: <password>
<<value,value>>: “”
<<key,key>>: <role>
<<value,value>>: <SYSADMIN>
<<key,key>>: <warehouse>
<<value,value>>: <SNOWFLAKE_WAREHOUSE>
 <<description,description>>: “Description of the connection”
....




[#connection-parameters]
== TML parameters for {object}
These parameters and their definitions are specific to {object}; this list doesn't contain every parameter in every TML file. Similarly, the parameter definitions may vary from object to object, since the parameters may have different roles in different objects.

[width="100%",grid="none",options="header"]
|===
| a - e | f - k | n - v
a| <<authentication_type,authentication_type>>

<<connection,connection>>

<<description,description>>


a| <<guid,guid>>

<<key,key>>


a| <<name,name>>

<<properties,properties>>

<<type,type>>

<<value,value>>

|===

[#authentication_type]
authentication_type:: The type of authentication used to connect to the connection. Note that authentication type is usually SERVICE_ACCOUNT, although certain connections also support KEY_PAIR.
// For OAUTH, ThoughtSpot supports standard OAuth, AWS IAM, External OAuth, OAuth using PKCE, external OAuth using PKCE, and OAuth using PEZ, depending on the connection.
+
NOTE: We do not currently support Connection TML for connections authenticated using OAuth.

[#connection]
connection:: A way to identify the external data warehouse connecting to ThoughtSpot.

[#description]
description:: The text that describes the connection.

[#guid]
guid:: The GUID for the connection. You can find this string of letters and numbers at the end of the URL for the object.

[#key]
key:: The key to define in a key-value pair. Common key-value pairs in a Connection TML file are accountName, user, password, role, and warehouse.

[#name]
name:: Name of the connection.

[#properties]
properties:: A container for the key-value pairs that define a connection.

[#type]
type:: Type of connection.

[#value]
value:: The value defined in a key-value pair. Common key-value pairs in a Connection TML file are accountName, user, password, role, and warehouse.

[#limitations]
== Limitations of working with TML files

There are certain limitations to the changes you can apply by editing {object} through TML.

* You can't import manually compressed .zip files.
You can only import .zip files that you exported from ThoughtSpot: a custom set of TML files, an object and its associated data sources, or multiple objects of the same type that you exported from the object list page.
