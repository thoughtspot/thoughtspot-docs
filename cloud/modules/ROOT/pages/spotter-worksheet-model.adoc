= Spotter Worksheet/Model readiness
:last_updated: 2/14/2025
:author: Naomi, Mark
:linkattrs:
:experimental:
:page-layout: default-cloud
:description:
:jira: SCAL-228500, SCAL-232768, SCAL-243503, SCAL-240422


ThoughtSpot’s AI tools achieve accuracy through four primary channels: our AI model training, system post-processing, customer data preparation, and coaching of the AI tool. By taking the time to prepare your data for use with our AI systems, you not only achieve greater accuracy, but increase the intuitiveness and satisfaction your users have with its experience.


There are several proactive steps you can take to optimize Worksheets or Models and significantly improve Spotter accuracy. These steps include:


Reducing Worksheet or Model size to fewer than fifty columns.
Using human-readable and unique column names.
Turning on *Indexing* for relevant columns.
Adding synonyms for columns that have other nicknames or internal terms.


This article details each step of setting up a Worksheet or Model, and will help your company reach the highest accuracy with our AI systems.


== Guidelines for column names


Avoid similar column names::
If identical strings appear in multiple columns, it may confuse Spotter’s judgment on column selection.
Example:::
For the query ‘Show customers by Product’, it is difficult for Spotter to understand which column to choose between ‘Product Line’ and' Product Type’, and the answer generated may not use the column expected.
Use user-friendly names over abbreviations & domain specific terms::
When creating column names, avoid using abbreviations and internal jargon or acronyms, as they may not be easily understood by Spotter.
Example:::
For instance, for the query ‘Show the number of policies created last month’ , it is difficult for Spotter to know whether to choose the ‘plc_date’ or ‘crt_date’ column to generate the answer.
Avoid mismatch between column names and datatype::
If column names do not align with their respective data types, it can impact accuracy.
Example:::
If a column named ‘weeks’ is marked as an attribute column with values such as ‘Week 1’ and ‘Week 2’, it makes it difficult for Spotter to respond correctly to date related queries. If you want to keep the data, then we suggest renaming the column to ‘Week number’ to make it less confusing for Spotter.
Avoid mismatch between column values and data type::
Ensure column values match their respective data types.
Example::: If a column named 'order_date' has values like '01 Jan 20' but is set to text data type, change it to date data type to improve accuracy.
Use spaces as delimiters in column names::
Avoid using other types of delimiters such as brackets and emojis as they may interfere with Spotter functionalities.
Avoid overlap in column names and keywords::
Avoid overlap between column names and xref:keywords.adoc[ThoughtSpot search keywords] as it can impact accurate query interpretation.
Example:::
If a column is named 'Sales growth,' indicating annual sales growth, and a user searches for 'What is the Sales growth month on month' Spotter might prioritize the 'Sales growth' column instead of recognizing the user's intent to use the 'growth' keyword on the ‘Sales’ column in a monthly context.

Avoid column names that start with numbers:: You can still name columns with numbers in the middle of the title.
Avoid using special characters (like ‘]’, ‘&’ so on) in the column/formula names::
Some special characters might be necessary for better readability such as Profit % to denote percentage of profit calculation.
Unless required for performance, we suggest to avoid having such columns and rely on Spotter to use the appropriate columns to generate such calculations.


== Guidelines for column descriptions

Adding clear and concise column descriptions improves Spotter’s accuracy by helping it interpret the column’s meaning, values, and intended use in queries.

Provide meaningful descriptions to improve query interpretation::
Include a brief but informative description to clarify what the column represents. This helps Spotter generate more accurate responses.
Example::: A column labeled "ACV" can have the description:
"Annual Contract Value, representing total revenue from contracts over a year."
This ensures Spotter correctly interprets queries related to revenue and ACV.

Pass contextual information to refine filtering logic::
Help Spotter apply the correct logic when filtering based on column values.
Example::: A column containing date-month values such as 'Jan', 'Feb', etc., can have the description:
"Represents date months in 'mmm' format (e.g., Jan). Use when filtering by month."
This ensures Spotter correctly maps ‘January’ to ‘Jan’ in queries.

Use descriptions to guide Spotter on how to use or avoid a column::
If a column should be used in a specific way (or avoided in certain contexts), mention this explicitly in the description.

Example::: A column with Boolean values can have the description:
"Indicates whether an account is active (TRUE = active, FALSE = inactive). Use for filtering active accounts."
This prevents misinterpretation of TRUE/FALSE values in queries.

Keep descriptions concise (maximum 200 characters)::
Spotter will only consider the first 200 characters of the description.
Ensure critical details are included within this limit for accurate interpretation.

== Guidelines for synonyms


Define synonyms for common terms::
We recommend you consistently use easily understandable column names that are widely recognized within the business unit or organization. However, there may be occasions where different terms are employed to denote the same data column.
Example:::
'Sales' typically denotes the column capturing total revenue from item sales, but 'turnover' and 'revenue' may also be used interchangeably for this purpose within your business context. In such instances, we advise you name the column as 'Sales,' which is the most prevalent term, and xref:data-modeling-visibility.adoc#create-synonyms[define ‘turnover’ and ‘revenue’ as synonyms] for the ‘Sales’ column. +
This approach will assist Spotter in picking the column correctly when users ask for sales, turnover or revenue.
+
[.bordered]
image:spotter-synonyms.png[Synonyms for Spotter]


Avoid overlap in synonyms and column names::
Ensure that the synonyms for a particular column are clear and distinct from any other column name or column synonyms to avoid confusing Spotter from picking the right column.
Example:::
For the query ‘Show the total expenses for last month’, if there is a column named 'Costs' with a synonym 'Expense', and another column named 'Material Expenses' in the Worksheet or Model, Spotter might not be able to select the right column to generate a response




== Guidelines for date columns


Avoid adding multiple date columns::
We advise keeping the number of date columns to a minimum, adding only those that are necessary. Keywords such as 'growth' often rely on date columns, making it challenging for the system to select the appropriate column to generate a response. +
If your worksheet has more than 2 date columns, we suggest building content such as Answers and Liveboards containing the specific date columns.
This helps Spotter understand the relationship between the columns in the Worksheet or Model and can significantly improve Spotter's ability to accurately select the correct date columns when generating a response.

Default aggregation granularity in TML file:: If you want to assign a different default aggregation granularity, you can set it for each date column in the Worksheet/Model TML file using the default_date_bucket property.
+
[.bordered]
image:default_date_bucket.png[Set the default_date_bucket_to DAILY]

Example::: If you set the default_date_bucket to DAILY for the column Order Date, the column is now interpreted as Order Date daily. Any questions such as "Display the trend of orders" would show the trend on a daily level by default.


== Guidelines for indexing columns


Ensure the columns being queried upon Spotter are indexed::
Indexing is essential for enabling access to relevant data values and accurately identifying specific column values in queries.
Example:::
For instance, consider a query such as ‘Show sales for Metformin’. Without indexing, it becomes difficult for Spotter to discern whether to look for the value ‘Metformin’  in the column named ‘Area’ or ‘Vendor Name’ or ‘Drug Name’. +
If you don't see value suggestions in Search Data, then Spotter will likely be unable to pick those values correctly.
+
[.bordered]
image:spotter-value-suggestions-none.png[Term in Search Data shows no suggestions]
+
[.bordered]
image:spotter-value-suggestions.png[Term entered in Search Data shows suggested value]



//South value being fetched from the Region column post indexing


NOTE: Always disable indexing for Personally Identifiable Information (PII) Data


Avoid indexing unused columns with overlapping values::
Index only required columns.  Too many values from columns might confuse Spotter in selecting the right column.
Example:::
Consider a query such as 'Show sales for Washington area'. Spotter may find it challenging to determine whether the user is referring to 'Washington' within the context of the column names 'District' or 'State', as the value is present for both columns. If it's unavoidable in your business context to disable indexing on a column as users can query for values on it, we suggest specifying the column name while querying to help Spotter in picking the right column. +
For instance, changing the query to  ‘Show sales for Washington State’, will provide a more accurate result.
Avoid indexing descriptive text columns::
This can impact accuracy as it confuses Spotter in picking the right column.
Ensure indexing of low cardinality columns::
Proactively identify and address low cardinality columns lacking indexing to optimize data accessibility and analysis accuracy.
xref:worksheet-formula.adoc[Create formulas] or xref:column-sets.adoc[sets] for high cardinality columns::
This helps in mitigating potential indexing issues and enhancing Spotter’s accuracy.

[#optimize-spotter]
=== Using Optimize for Spotter to index attribute columns

To improve search accuracy it's important to index Worksheet and Model attribute columns properly, so ThoughtSpot can effectively retrieve and provide sample values associated with those columns. These sample values, combined with the column name, are passed to the LLM, which enables it to do the following:

* Understand the column properties better
* Map the requested value in the query to the correct column value when generating an answer

*Optimize for Spotter* makes this a lot easier because it tells you columns which are not configured to index values and allows you to easily configure indexing on the appropriate columns.

IMPORTANT: You must have permission to edit tables in the Model or Worksheet to use _Optimize for Spotter_.

To use Optimize for Spotter, do the following:

. In the Data workspace, click the name of the Worksheet or Model you want to optimize for Spotter.
. In the Model or Worksheet, click the *More* menu image:icon-more-10px.png[Chart configuration icon image], and select *Enable Spotter*.
. Click the *Optimize for Spotter* button.
+
The _Optimize for Spotter_ window appears listing the columns suggested for indexing.
+
[.bordered]
image::optimize_spotter.png[Optimize for Spotter]
. Do one of the following:
* If you want to use the columns that are selected, click *Optimize*.
* If you want select different columns, select only the checkboxes for the columns you want, and click *Optimize*.
+
After all selected columns are indexed, the _Indexing successful_ message appears at the bottom of the page.
+
image::optimize-spotter-success.png[Indexing successful]

==== Troubleshooting

If it is not possible to fully optimize the Worksheet or Model, or there are additional recommended steps before optimizing, one of the following messages appears:

- If "Some columns were not updated" appears, it lists which columns could not be indexed. To index those columns, contact your ThoughtSpot administrator to get edit access to the underlying table.

- The "Optimize for Spotter" guidance message appears when there are additional steps recommended for Spotter Optimization. In this case, refer to xref:worksheet-readiness.adoc[Worksheet readiness for Sage] for guidelines on how to prepare your Worksheet or Model to improve accuracy.
+
[.bordered]
image::optimize-spotter-readiness.png[Optimize for Spotter readiness]
