////
:doctype: book
////include::7.1@software:ROOT:connections-snowflake-edit.adoc[]
////
= Edit a {connection} connection
:last_updated: 8/11/2020
:experimental:
:linkattrs:
:page-layout: default-cloud
:page-partial:
:connection: Snowflake
:description: You can edit a Snowflake connection to add tables and columns, as well as manually invalidate refresh tokens for users with expired refresh tokens.
:jira: SCAL-118895, SCAL-201045

You can edit a {connection} connection to add tables and columns, as well as manually invalidate refresh tokens from Snowflake for users who have refresh tokens that expired.

== Editing a Snowflake connection

To edit a Snowflake connection:

. Select *Data* in the top navigation bar.
. Open the *Connections* tab in the left navigation bar.
. Select the name of the connection you want to edit.

. Select *Edit connection* at the upper-right side of the page.
+
image::snowflake-editconnection.png[Edit connection]

. On the Choose connection type page, change the connection name or description (if needed), and then select *Continue*.
. On the {connection} connection details page, make any changes needed, and then select *Continue*.
. Expand the database table dropdown menu, and select the tables and columns you want to add.
+
image::redshift-edittables.png[Select tables and columns]

. Click *Update*, and then select *Confirm* to save the updated connection detail.

To remove a table from a connection, delete it from the connection details page.
For more information, see: xref:connections-snowflake-delete.adoc[Delete a {connection} connection].

See the xref:connections-snowflake-reference.adoc[Connection reference] for details of connection parameters.

We also recommend that you review xref:connections-snowflake-best.adoc[Best Practices for {connection} connections].

[#invalidate-tokens]
== Invalidating refresh tokens of a Snowflake connection configured with Snowflake OAuth or OAuth with PKCE

If a Snowflake user's refresh token has been invalidated, the user will not be able to access insights from a Snowflake connection, or the connection itself. This can happen for the following reasons:

- Their default role in Snowflake was changed.
- Their token was obtained for a specific role in the connection and was later revoked.

In this case, it is necessary for the administrator or the author of the connection to use the Invalidate Tokens command, which will then allow the user to re-authenticate to regain access to the connection.

This can be done in two ways:

- If the connection is edited, a message appears at the top of the connection screen indicating that the connection has been modified, and that users may have to re-authenticate. An *Invalidate Tokens* link appears next to the message. Selecting that link will allow the user to invalidate tokens.
- The administrator or author of the connection, can use the Invalidate Tokens command in the Snowflake connection.

To invalidate refresh tokens of a Snowflake connection:

. Select *Data* in the top navigation bar.
. Open the *Connections* tab in the left navigation bar.
. Select the name of the Snowflake connection you want to edit.
. Click the *More* menu image:icon-more-10px.png[more menu icon], and select *Invalidate Tokens*

After running the Invalidate Tokens command, logged-in users of the connection will have to re-authenticate to regain access to the connection.

IMPORTANT: Invalidating tokens for a connection, invalidates the refresh tokens for all users of a connection, except the author.

[#validate-metadata]
== Validate metadata

You can now validate connections to discover any changes in metadata after the connection was created. When you validate a connection, ThoughtSpot provides a JSON file containing details on any metadata changes. Once alerted to a metadata change, you can use TML to update the connection.

To validate your connection:

. Select *Data* in the top navigation bar.

. Open the *Connections* tab in the left navigation bar.

. Select the name of the connection you want to validate.

. Select the *more options* menu icon image:icon-more-10px.png[ellipsis icon] and click *Validate*.

. If ThoughtSpot detects any changes to the connection's metadata, the following message appears: "Your connection is not valid and requires metadata changes. You can download the list of changes affecting this connection by clicking on the button below."
+
To download the change log, click *Download metadata change log*. The change log automatically downloads to your browser's Downloads folder in JSON format.

'''
> **Related information**
>
> * xref:connections-snowflake-add.adoc[Add a {connection} connection]
> * xref:connections-snowflake-remap.adoc[Remap a {connection} connection]
> * xref:connections-snowflake-external-tables.adoc[Query external tables from your {connection} connection]
> * xref:connections-snowflake-delete-table.adoc[Delete a table from a {connection} connection]
> * xref:connections-snowflake-delete-table-dependencies.adoc[Delete a table with dependent objects]
> * xref:connections-snowflake-delete.adoc[Delete a {connection} connection]
> * xref:connections-snowflake-oauth.adoc[Configure OAuth]
> * xref:connections-snowflake-azure-ad-oauth.adoc[Configure Azure AD OAuth]
> * xref:connections-snowflake-best.adoc[Best practices for {connection} connections]
> * xref:connections-snowflake-private-link.adoc[]
> * xref:connections-snowflake-psc.adoc[]
> * xref:connections-snowflake-reference.adoc[Connection reference for {connection}]
> * xref:connections-query-tags.adoc#tag-snowflake[ThoughtSpot query tags in Snowflake]
> * xref:connections-snowflake-passthrough.adoc[]
////
