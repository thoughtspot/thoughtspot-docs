= Subquery search
:last_updated: 03/23/2020
:linkattrs:
:experimental:
:page-layout: default-cloud
:page-aliases: /complex-search/in-keyword-searches.adoc
:description: You can use the IN keyword to complete a nested search

When you want to do a search on top of another search, commonly known as a subquery, you can use the `IN` keyword.

image::search-example-in-keyword.png[Image of the ThoughtSpot search bar. The query is sales city store store in (top 10 store by sales)]

Suppose you must narrow a result set based on criteria defined using a search.
For example:

Find the top 5 stores by sales in the bakery department

Then you want to see all sales across all departments for those five stores.

In past versions,  you'd have two options:

. Do your first search to find top 5 stores by bakery sales and save it as a view.
Then join the view to your Worksheet and search both together to get your Answer.
+
This approach gives a dynamic result that's computed on the fly each time, but it requires the Can Manage Data privilege and requires multiple steps.

. Save the names of the five stores with the most bakery sales and use them as a filter in a new search.
+
This approach is easy to accomplish for ad hoc searches, but doesn't compute dynamically.

Now you can do this analysis in a single search using the "in" keyword.
This provides the benefit of computing the Answer dynamically without the extra steps required when using a view.

== The "in" keyword

include::partial$keywords-in.adoc[]

== Create an IN search

. Start a new search.
. Run the search you plan to use for the `in` clause.
That is, the first level search.
+
Check that the result is what you're looking for.
+
image::in_search_first_step.png[Sample chart for first level search]

. Copy that search query, and paste it into your new search as the `in` clause.
+
image::in_search_example.png[Sample chart for in query]

'''
> **Related information**
>
> * xref:search-time.adoc[Time series analysis]
> * xref:search-growth.adoc[Search using growth over time]
> * xref:search-proximity.adoc[Proximity search: near and farther than]