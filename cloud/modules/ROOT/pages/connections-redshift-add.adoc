= Add a {connection} connection
:last_updated: 10/08/2024
:experimental:
:linkattrs:
:page-partial:
:page-layout: default-cloud
:page-aliases: /data-integrate/embrace/embrace-redshift-add.adoc
:connection: Redshift
:description: Learn how to add a connection from ThoughtSpot to Amazon Redshift.
:jira: SCAL-186056, SCAL-203459

== Before you begin

If you are going to use SSL, you must configure it before you can add a {connection} connection.

=== Enabling SSL in {connection}

If you need to create a secure connection to Amazon {connection}, you must edit the "parameter group" assigned to your {connection} cluster and enable the _require_SSL_ flag.

To enable *FIPS-compliant SSL* mode, set both the _use_fips_ssl_ parameter and the _require_SSL_ parameter to *true* in the parameter group that is associated with your {connection} cluster.

For more information, see https://docs.aws.amazon.com/redshift/latest/mgmt/connecting-ssl-support.html[Connect using SSL^] in Amazon's {connection} documentation.

////
=== Configuring OAuth

If you need to use OAuth with {connection}, you must configure an OpenID Connect (OIDC) provider in AWS IAM. For details, see xref:connections-redshift-oauth.adoc[Configure OAuth for a {connection} connection].
////

== Adding a {connection} connection

To connect to Amazon {connection}:

ifndef::spotter[]
. Select *Data* in the top navigation bar.
. Open the *Connections* tab in the left navigation bar, and select the {connection} tile. Alternatively, select *+ Create new* in the left navigation bar, select *Connection*, and select the {connection} tile.
endif::[]
ifdef::spotter[]
. Click the app switcher menu image:spotter-app-switcher.png[Spotter app switcher] and then click *{form-factor}*.
. On the left side of the screen, select *Manage data > Add data source*.
. On the _Add a data source_ page, click *Connect data*.
+
[.bordered]
image::connection-spotter-set-up-new-connection.png[Set up new connection]
endif::[]
. Create a name for your connection and a description (optional), then select *Continue*.
+
image::embrace-redshift-connection-type-ts-cloud.png[Choose connection type]

. Enter the connection details for your {connection} data source using Service Account, IAM, OAuth, or AWS IDC OAuth. The *User* you specify must have at least *read* access to the *SVV_TABLE_INFO* table.
+
image::redshift-connectiondetails.png[Enter connection details]
+
====
For Service Account authentication, do the following:

** Enter Host, Port, User, Password, and Database.
====
+
====
For IAM authentication, do the following:

** Enter Host, Port, Database, Db User, Access Key, and Secret Key.
====
+
====
For OAuth authentication, do the following:

** Enter Host, Port, OAuth Client ID, OAuth Client Secret, Scope, Auth Url, Access token Url, and Database.
====
+
====
For AWS IDC OAuth authentication, do the following:

** Enter Host, Port, OAuth Client ID, OAuth Client Secret, Scope, Auth Url, Access token Url, AWS Identity Namespace, and Database.
====
+

////
For OAuth authentication, do the following:

 ** Enter Host, Port, Database, OAuth Client ID, OAuth Client Secret, Auth Url, Access token Url, Role ARN, and DbGroups.
+
Refer to the xref:connections-redshift-reference.adoc[{connection} connection reference] for more information on each of the specific attributes you must enter for your connection.
////

. (Optional) To customize additional JDBC parameters supported by {connection}, use *Advanced Config*. Refer to the https://docs.aws.amazon.com/redshift/latest/mgmt/jdbc20-configuration-options.html[Redshift JDBC documentation^].

. (Optional) If you enabled SSL in your {connection} cluster, you must do the following:
 .. Select the *Advanced Config* menu to reveal the *Key* and *Value* fields.
 .. For Key, enter *SSL*.
 .. For Value, enter *True*.

+
To add more keys and values, select the plus sign (+), and enter them.

+
NOTE: Any key-value pairs that you enter must be defined in your {connection} data source.
Key-value pairs are case-sensitive.

. You can add a parameter to list all the databases in your Cloud data warehouse even if you add a specific database name in the *Database* property. To use this parameter, do the following:
.. Select the *Advanced Config* menu to reveal the *Key* and *Value* fields.
.. For Key, enter *databaseMetadataCurrentDbOnly*.
.. For Value, enter *False*.

. Select *Continue*.
. Select tables (on the left) and the columns from each table (on the right), and then select *Create connection*.
+
image::snowflake-selecttables.png[Select tables and columns]
+
A message appears indicating the number of tables and columns that will be added to your connection.

. Select *Create*.

ifdef::spotter[]
. On the _Add a data source_ page, click *Model your data*.
+
[.bordered]
image::connection-spotter-set-up-new-connection-2.png[connection created]

include::partial$model-build.adoc[]

include::partial$spotter-coach-and-chat.adoc[]
+

endif::[]

ifndef::spotter[]
+
Once the connection is added, you can search your {connection} database right away by selecting *Search now*.
+
image::redshift-connectioncreated.png[The "connection created" screen]
+
Your new connection appears on the *Data* > *Connections* page.
You can select the name of your connection to view the tables and columns in your connection.

The connection you just created is a link to the external data source.
If there are any joins in the selected tables of the external data source, those are imported into ThoughtSpot.

You can now perform a live query on the selected tables and columns of your connection.
Because the selected tables and columns in your connection are linked, it may take a while to initially render the search results.
This is because ThoughtSpot does not cache linked data.
With linked data, ThoughtSpot queries the external database directly.
endif::[]
ifndef::spotter[]
== Share a connection

Users with *can manage data* or *admin* privileges can share connections with other users or groups that have *can manage data* privileges. Once granted access to a connection, users can add, remove, and modify tables in that connection.

To share a connection with another user, follow these steps:

. Navigate to the *Data* tab and select *Connections*.

. Select the checkbox next to the name of the connection you want to share, and click *Share*.

. In the *Share connection* dialog, enter the ID of the user or group you want to share the connection with. You can use the search bar to find the user or group.

. Select *Done*.

Note that to remove share access from a connection, you must navigate to the *Share connection* dialog and select *Remove access* to the left of the user group or name.
endif::[]

'''
> **Related information**
>
> * xref:connections-redshift-best.adoc[]
> * xref:connections-redshift-edit.adoc[Edit a {connection} connection]
> * xref:connections-redshift-remap.adoc[Remap a {connection} connection]
> * xref:connections-redshift-delete-table.adoc[Delete a table from a {connection} connection]
> * xref:connections-redshift-delete-table-dependencies.adoc[Delete a table with dependencies from a {connection} connection]
> * xref:connections-redshift-reference.adoc[{connection} connection reference]
> * xref:connections-redshift-delete.adoc[Delete a {connection} connection]
> * xref:connections-redshift-external-tables.adoc[]
> * xref:connections-redshift-private-link.adoc[]
> * xref:connections-redshift-partner.adoc[Redshift Partner Connect overview]
> * xref:connections-redshift-aws-idc-oauth.adoc[]
> * xref:connections-redshift-azure-ad-oauth.adoc[]
> * xref:10.3.0.cl@cloud:ROOT:connections-query-tags.adoc#tag-redshift[ThoughtSpot query tags in Redshift]
> * xref:connections-redshift-passthrough.adoc[]
// > * xref:connections-aws-secrets.adoc[Configure AWS Secrets Manager] //
// > * xref:data-load.adoc[Load and manage data]
> * xref:10.3.0.cl@cloud:ROOT:security.adoc[Data and object security]
