= Query sets
:last_updated: 6/4/24
:author: Naomi
:linkattrs:
:page-layout: default-cloud-early-access
:page-aliases: /admin/query-sets.adoc
:experimental:
:description: You can now create query sets, which can be used to classify values in a list you can then reuse across multiple analyses.
:jira: SCAL-229666

You can create sets, which can be used to classify values in a list that you can then reuse across multiple analyses. Answer, formulas and parameters are generally available only when in use in an Answer, and must be remade if you navigate away from the Answer without saving. Sets are reusable across many answers with a single point of definition. A set is built from a Worksheet however it does not belong to the Worksheet. When a set is initially created it is only available to the creator. When a set is used in an Answer or Liveboard, and this Answer or Liveboard is shared with specific users or groups of users, the set is then available for use as a community object.

ThoughtSpot now supports query sets.

NOTE: Query sets are in early access and off by default. To enable this feature, contact your ThoughtSpot administrator.


To create a query set, first define the business question you wish to answer.


For example, you may want to create a set to show the first sale date per customer.


To create a column showcasing this defined list of values, follow these steps:

. Navigate to the *Search Data* page by clicking the *Search data* button.
+
[.bordered]
image::search-data-button.png[Search Data button]

. Click *Add* and select *Query set*.
+
[.bordered]
image::query-set-add.png[Add query set]

. Select a column from the left side bar, or type a column name into the search bar.
+
[.bordered]
image::query-set-column.png[Query set coolumn]
//. Ensure you are searching on the correct Worksheet, and select the *Customer ID* column from the left side bar, or type the word into the Search bar. To see the quantity purchased by product, select *Min Transaction Date* and click the *Go* button or press *Enter*.

. Click *Next*.

. In the *Select name and description* window, complete the following fields:
.. Set name: Name your query set something meaningful.
.. Set description: Describe what this query set represents.
+
[.bordered]
image::query-set-name.png[Query set name]
. Click *Next*.
. Under *Select a base column*, select a *Base column*. Select the column you are using as the base of your list of values.
+
NOTE: It is important that for each base column value there is only a single return column value. If this is not true, then the query generation will result in a many-to-many join. This may be desired. This should be reviewed as this will likely lead to incorrect values as result of overcounting.

. Under *Define groups for included query values*:
.. Select *Column* and *Select a column with output groups* from the drop-down menu. Each row in the base column will be assigned to an output group based on its value from this column.
.. Select *Conditions* to create groups using operators. Enter your desired values for the conditions.
.. To add multiple conditions click *Add condition*.
+
NOTE: Multiple conditions can be combined with so that all conditions should be true or alternatively only a single condition as true.
+
.. To add multiple groups click *Add group*.
+
NOTE: If multiple group conditions return true for an anchor column value then the order of the groups takes precedence. That is for each value only one condition will return true.
+
.. For conditions, you can choose to show remaining values as either *Individual values* or as a *Group*. If you choose to group the remaining values, you can enter a name for the group.
+
For example, you could create a query set that list each customer, their sales dollar amount and then add a formula that ranks the amount in descending order. You could then add groups to define Gold, Silver, Bronze levels where Gold is Ranked 1-10, Silver 11-50 and Bronze everyone else.
+
image::query-sets-example.png[Query sets esample]

. Under *Define groups for excluded query values*, select either *Hide excluded values* or *Group excluded values*. If you group excluded values, you can give the group a custom name.
. Click *Save*.

=== Limitations

* We do not currently support row-level security for query sets. Adding row-level security to a query set results in a query generation error.

* It is not possible to un-share a set.
* Sets are only shared with View permissions.

