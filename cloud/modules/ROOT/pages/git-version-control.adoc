= Version control for Liveboards and Answers
:last_updated: 5/7/2024
:author: Mark
:experimental:
:linkattrs:
:page-layout: default-cloud-early-access
:description: Enable version control on your ThoughtSpot cluster, so users can enable version control on specific Liveboards and Answers.
:jira: SCAL-196890, SCAL-185652 (can manage version control privilege)

With version control, every time a user saves changes to a Liveboard or Answer, a new version is created and stored in Github. Any user with edit access to the Liveboard or Answer can browse the version history in ThoughtSpot and restore any saved versions whenever needed. Version control must first be configured on your cluster or Org. After that, it can be enabled on specific Liveboards and Answers where version control is wanted.

There are two steps to enabling version control in ThoughtSpot, which must be done in the following order:

. Enable version control for the cluster or Org.
. Enable version control for specific Liveboards or Answers in the Org.

IMPORTANT: Version control cannot be enabled by default for all Liveboards and Answers.

== Version control for a cluster or Org

=== Prerequisites

To enable version control for a cluster or Org, the following are required:

* Administrator access to the cluster/Org
* GitHub repository created in Github or GitHub Enterprise
* Github user ID of admin who has access to the repository
* Github repository configured with:

** One commit branch for _each Org_ where you are enabling version control
*** ThoughtSpot stores TML files here for each Liveboard and Answer enabled for version control.
** One configuration branch
*** ThoughtSpot stores a set of configuration files here which are required for the GIT integration and CI/CD to work.
+
TIP: ThoughtSpot recommends *not* using the Main branch for either commits or configuration.
** Personal access token from Github (https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic[Classic^] or https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-fine-grained-personal-access-token[fine-grained^])
*** Under _Select scopes_, be sure to select the *repo* checkbox before clicking *Generate token*.

* The https URL to the Github repository.

=== Enabling version control for a cluster or Org

To enable version control for a cluster or Org, do the following:

. Go to the *Admin* tab.
. If enabling for an Org, select the Org where you want to enable version control.
. Under _Application settings_, select *Version Control*.
. Under the message "Version control not configured", Click *Configure*.
+
image::github-creds.png[Enter github credentials]

. In the _Enter Github Credentials_ window, do the following:
.. For _Repository_, enter the Github repository to store version control information.
.. For _Username_, enter your Github username.
.. For _Token_, enter or paste your personal access token associated with your Github username.
+
If you don't a have personal access token yet, sign in to Github and create one of the following access tokens, and enter it in the _Token_ field:

... https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic[Classic^]
... https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-fine-grained-personal-access-token[fine-grained^]
+
Under Select scopes be sure to select the repo checkbox before clicking *Generate token*.
. Click *Continue*.
. In the _Select Branch_ window, do the following:
* For _Commit branch_ select the commit branch you created in your repository.
* For _Configuration branch_ select the configuration branch you created in your repository.
* Make sure the *Save version history* checkbox is selected.
. Click *Enable*.


Version control is now enabled for your Org. In order for version control to be available for any Liveboard or Answer, it must be enabled individually in the Liveboard or Answer.

== Version control for a Liveboard or Answer

=== Prerequisites

To enable version control on a Liveboard or Answer, you must:

* Be in a group which is assigned the "Can manage version control" privilege
* Have edit permission on the Liveboard or Answer and the underlying datasource(s)

=== Enabling version control for a Liveboard or Answer

To enable version control for a Liveboard or Answer, do the following:

. Navigate to the Liveboard or Answer where you want to enable version control.
. Click the More menu image:icon-more-10px.png[more menu], and select *Enable Version Control*.

== Editing the version control configuration

After you enable version control for a cluster or Org, you can edit the configuration. However, changing these settings will cause a service interruption for all users of a few minutes. Consider making your changes during a scheduled maintenance window.

. Go to the *Admin* tab.
. If editing for an Org, select the Org where you want to edit version control.
. Under _Application settings_, select *Version Control*.
. Click *Edit*.
. In the _Enter Github credentials_ window, Make any changes required to the Repository, Username, or Token and click *Continue*.
. In the _Select Branch_ window, make any changes required to the Commit and Configuration branches, make sure the Save version history checkbox is selected, and click *Update*.

== Resetting the version control configuration

CAUTION: Resetting your version control configuration, deletes the configuration completely, causing all version history from your GIT branches to be lost.

To reset the version control configuration, do the following:

. Click *Reset Configuration*.
+
The _Reset Configuration_ message appears asking you if you really want to reset the configuration.
. To proceed, click *Yes*.